# Render Blueprint for Flask Backend + Next.js Frontend
# Deploy to Render: https://render.com

services:
  # Flask API Backend
  - type: web
    name: house-price-api
    runtime: python
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn app:app --bind 0.0.0.0:$PORT
    envVars:
      - key: PYTHON_VERSION
        value: "3.11.4"
      - key: MODEL_PATH
        value: housepred.pkl
      - key: SCALER_PATH
        value: scaler.pkl
    healthCheckPath: /health

  # Next.js Frontend (Optional - can also deploy to Vercel)
  - type: web
    name: house-price-frontend
    runtime: node
    rootDir: web
    buildCommand: npm install && npm run build
    startCommand: npm run start
    envVars:
      - key: NODE_VERSION
        value: "20"
      - key: NEXT_PUBLIC_API_URL
        value: https://house-price-api.onrender.com
